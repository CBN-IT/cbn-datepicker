<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-shadow/paper-shadow.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../core-icons/core-icons.html">
<link rel="import" href="../core-field/core-field.html">
<link rel="import" href="../core-selector/core-selector.html">

<script src="../moment/moment.js"></script>
<script src="../moment-range/lib/moment-range.js"></script>

<polymer-element name="cbn-datepicker">
    <template>
        <link rel="stylesheet" href="cbn-datepicker.css">
        <paper-input id="input" floatingLabel label="Set date" value="{{ date }}" on-focus="{{open}}" on-blur="{{close}}" flex></paper-input>

        <div id="calendar" on-mousedown="{{refocusInput}}"  vertical layout center-justified>
            <paper-shadow z="1" fit></paper-shadow>
            <div class="calendar-head" layout horizontal>
                <paper-icon-button recenteringTouch="true" class="icon" icon="arrow-back" on-tap="{{ prev }}"></paper-icon-button>
                <paper-button recenteringTouch="true" flex class="colored header {{ {'hidden': header1.length==0} | tokenList}}" on-tap="{{ nextViewBy1 }}">{{ header1 }}</paper-button>
                <paper-button recenteringTouch="true" flex class="colored header {{ {'hidden': header2.length==0} | tokenList}}" on-tap="{{ nextViewBy2 }}">{{ header2 }}</paper-button>
                <paper-icon-button recenteringTouch="true" class="icon" icon="arrow-forward" on-tap="{{ next }}"></paper-icon-button>
            </div>
            <core-selector valueattr="data-value" selected="{{ item }}" target="{{$.content}}" itemsSelector=".active"></core-selector>
            <div id="content" horizontal layout wrap justified>
                <template id="days" repeat="{{ it in items }}">
                    <paper-button recenteringTouch="true" class="{{ type }} {{ it.cl }}" data-value="{{ it.val }}" on-tap="{{ setItem }}">{{ it.label }}</paper-button>
                </template>
            </div>
            <div layout horizontal>
                <paper-icon-button class="icon" style="color: #4285f4;" icon="today" on-tap="{{ goToday }}">Today</paper-icon-button>
                <span flex></span>
                <paper-icon-button class="icon" style="color: red" icon="clear" on-tap="{{ clear }}">Clear</paper-icon-button>
            </div>
        </div>
    </template>
    <script src="cbn-datepicker.js"></script>
</polymer-element>
